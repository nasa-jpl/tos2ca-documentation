<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-fortracc-module" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">ForTraCC Module | TOS2CA Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nasa-jpl.github.io/tos2ca-documentation/img/nasa.png"><meta data-rh="true" name="twitter:image" content="https://nasa-jpl.github.io/tos2ca-documentation/img/nasa.png"><meta data-rh="true" property="og:url" content="https://nasa-jpl.github.io/tos2ca-documentation/docs/fortracc-module"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ForTraCC Module | TOS2CA Documentation"><meta data-rh="true" name="description" content="The ForTraCC Module repository can be found at https://github.com/nasa-jpl/tos2ca-fortracc-module."><meta data-rh="true" property="og:description" content="The ForTraCC Module repository can be found at https://github.com/nasa-jpl/tos2ca-fortracc-module."><link data-rh="true" rel="icon" href="/tos2ca-documentation/img/nasa.png"><link data-rh="true" rel="canonical" href="https://nasa-jpl.github.io/tos2ca-documentation/docs/fortracc-module"><link data-rh="true" rel="alternate" href="https://nasa-jpl.github.io/tos2ca-documentation/docs/fortracc-module" hreflang="en"><link data-rh="true" rel="alternate" href="https://nasa-jpl.github.io/tos2ca-documentation/docs/fortracc-module" hreflang="x-default"><link rel="stylesheet" href="/tos2ca-documentation/assets/css/styles.6977cc65.css">
<script src="/tos2ca-documentation/assets/js/runtime~main.d1adc968.js" defer="defer"></script>
<script src="/tos2ca-documentation/assets/js/main.a8ff6ed7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_ZH7A" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/tos2ca-documentation/"><div class="navbar__logo"><img src="/tos2ca-documentation/img/nasa.png" alt="NASA/Caltech/JPL Logo" class="themedComponent_dAtu themedComponent--light_kGTT"><img src="/tos2ca-documentation/img/nasa.png" alt="NASA/Caltech/JPL Logo" class="themedComponent_dAtu themedComponent--dark_JukX"></div><b class="navbar__title text--truncate">TOS2CA</b></a><a class="navbar__item navbar__link" href="/tos2ca-documentation/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/tos2ca-documentation/about">About</a><a class="navbar__item navbar__link" href="/tos2ca-documentation/code_of_conduct">Conduct</a><a class="navbar__item navbar__link" href="/tos2ca-documentation/contributing">Contributing</a><a class="navbar__item navbar__link" href="/tos2ca-documentation/governance">Governance</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/search?q=org%3Anasa-jpl+tos2ca&amp;type=repositories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">NASA-JPL GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_gR1H"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_dKHW colorModeToggle_7DUB"><button class="clean-btn toggleButton_UQco toggleButtonDisabled_ot2E" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_iCuN"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Duyh"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_HAw4"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_HqvU"><div class="docsWrapper_v3tB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_y5Gt" type="button"></button><div class="docRoot_vTvI"><aside class="theme-doc-sidebar-container docSidebarContainer_BcPY"><div class="sidebarViewport_YCQF"><div class="sidebar_rETu"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_uZUk"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tos2ca-documentation/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tos2ca-documentation/docs/anomaly-detection">Anomaly Detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/tos2ca-documentation/docs/fortracc-module">ForTraCC Module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tos2ca-documentation/docs/data-dictionaries">Data Dictionaries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tos2ca-documentation/docs/data_access_server">Data Access Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tos2ca-documentation/docs/tos2ca-documentation">Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tos2ca-documentation/docs/user-interface">User Interface</a></li></ul></nav></div></div></aside><main class="docMainContainer_WDDw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_RmxQ"><div class="docItemContainer_nVOQ"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_PXjS" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/tos2ca-documentation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_lUcB"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ForTraCC Module</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_xXon theme-doc-toc-mobile tocMobile_oUCI"><button type="button" class="clean-btn tocCollapsibleButton_EjAY">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ForTraCC Module</h1></header>
<p>The ForTraCC Module repository can be found at <a href="https://github.com/nasa-jpl/tos2ca-fortracc-module" target="_blank" rel="noopener noreferrer">https://github.com/nasa-jpl/tos2ca-fortracc-module</a>.</p>
<p><a href="#"><img decoding="async" loading="lazy" src="https://img.shields.io/badge/python-3.9-blue" alt="Language" class="img_fM9Q"></a></p>
<p>The ForTraCC Module contains tools to implement the
<a href="http://mtc-m16b.sid.inpe.br/col/sid.inpe.br/mtc-m15@80/2008/06.02.17.27/doc/ForTraCC_Published.pdf" target="_blank" rel="noopener noreferrer">ForTraCC algorithm</a>
natively in Python without the need of the original Fortran code.  There are slight differences between the Python and
Fortran implementations, but overall, the Python implementation accomplishes the same task.  Compare the plots in
<code>python_outputs</code> and <code>fortran_outputs</code> for more details.</p>
<p>ForTraCC works by first identifying a phenomenon with a series of masks(0 - background, 1 - phenomenon) and then
stitching the temporally disparate phenomena together into a time series based on overlaps between consecutive masks.
An isolated phenomenon is defined by spatially grouping together connected components of a mask
and temporally linking other connected components by their consecutive overlaps.  For example, in its original
implementation, ForTraCC was used to track mesoscale convective systems that evolve over time where each isolated
system is a phenomenon.  The original algorithm also included a forecasting component which was meant to predict
future phenomenon, but this feature is not implemented here.</p>
<h2 class="anchor anchorWithStickyNavbar_au_B" id="quickstart-simple-thresholding-case">Quickstart: Simple Thresholding Case<a href="#quickstart-simple-thresholding-case" class="hash-link" aria-label="Direct link to Quickstart: Simple Thresholding Case" title="Direct link to Quickstart: Simple Thresholding Case">​</a></h2>
<p>For a full example script(visualization included) of this case see <code>tutorial.py</code>.</p>
<p>Suppose we are given a time-ordered series of 2D images stored as a list of 2D numpy arrays.  If we want to represent
a particular phenomenon by thresholding the values of the images, we can apply ForTraCC with</p>
<div class="language-python codeBlockContainer_Ch_4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uXKs"><pre tabindex="0" class="prism-code language-python codeBlock_IQLA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_tke2"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> fortracc_python</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flow </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ThresholdEvent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> fortracc_python</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">objects </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> GeoGrid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> GeoGrid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    latitude</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># The latitude given as a list of numbers(must match number of rows in `images`)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    longitude  </span><span class="token comment" style="color:#999988;font-style:italic"># The longitude given as a list of numbers(must match number of columns in `images`)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">phenomenon </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ThresholdEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    images</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># A list of 2D, time-ordered images to use</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timestamps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># The datetime of each image given as a list of strings</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    grid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># The grid object on which each image is defined</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    threshold  </span><span class="token comment" style="color:#999988;font-style:italic"># The threshold below which a pixel is marked as a phenomenon</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time_series </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> phenomenon</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run_fortracc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Vx5J"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVTc" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_wXx_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_v7Wq"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For defining phenomenon with more than just a single threshold, see the next section below.</p>
<h2 class="anchor anchorWithStickyNavbar_au_B" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>There are two main modules: <code>flow.py</code> and <code>objects.py</code>.  The former contains Python classes for running ForTraCC whereas
the latter contains a few useful classes for defining phenomenon.  In this section, we run through the main classes and
discuss how they may be modified as a part of a larger pipeline.</p>
<h3 class="anchor anchorWithStickyNavbar_au_B" id="fortracc-implementation-flowpy">ForTraCC Implementation: <code>flow.py</code><a href="#fortracc-implementation-flowpy" class="hash-link" aria-label="Direct link to fortracc-implementation-flowpy" title="Direct link to fortracc-implementation-flowpy">​</a></h3>
<p><code>flow.py</code> has two classes: A base class <code>TimeOrderedSequence</code></p>
<div class="language-python codeBlockContainer_Ch_4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uXKs"><pre tabindex="0" class="prism-code language-python codeBlock_IQLA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_tke2"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">TimeOrderedSequence</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Object used to convert a sequence of provided masks into a time series of events.  Each event is</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    spatially defined as a connected component of a mask and temporally linked to other connected components</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    through the ForTraCC algorithm(Vila, Daniel Alejandro, et al. &quot;Forecast and Tracking the Evolution</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    of Cloud Clusters (ForTraCC) using satellite infrared imagery: Methodology and validation.&quot; Weather</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    and Forecasting 23.2 (2008): 233-245.).</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            masks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            timestamps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            grid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GeoGrid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        :param List[np.array] masks: A list of masks defining a phenomenon each given as an np.array.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        :param List[str] timestamps: A list of timestamps with the same size as `masks` where each item is a</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                                     string formatted as YYYYMMDDhhmm(e.g. 201501011430) giving the datetime of the</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                                     corresponding mask.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        :param GeoGrid grid: A GeoGrid object that defines the geographical grid on which the masks live.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><br></span></code></pre><div class="buttonGroup_Vx5J"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVTc" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_wXx_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_v7Wq"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and a custom class <code>ThresholdEvent</code> which defines a phenomenon with a single threshold</p>
<div class="language-python codeBlockContainer_Ch_4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uXKs"><pre tabindex="0" class="prism-code language-python codeBlock_IQLA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_tke2"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ThresholdEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TimeOrderedSequence</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Specific TimeOrderedSequence object that defines phenomenon based on a threshold.  Any pixel that is</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    less than the provided threshold is treated as a part of the phenomenon.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            images</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            timestamps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            grid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GeoGrid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            threshold</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">float</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        :param List[np.array] images: A list of images given as np.arrays.  Each pixel should have the same units</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                                      as the provided threshold.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        :param List[str] timestamps: A list of timestamps with the same size as `masks` where each item is a</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                                     string formatted as YYYYMMDDhhmm(e.g. 201501011430) giving the datetime of the</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                                     corresponding mask.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        :param GeoGrid grid: A GeoGrid object that defines the geographical grid on which the masks live.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        :param float threshold: The threshold below which a phenomenon is defined.  The threshold should have the</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                                same units as the values in `images`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><br></span></code></pre><div class="buttonGroup_Vx5J"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVTc" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_wXx_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_v7Wq"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Looking at the base class, all that is needed to run ForTraCC is a time-ordered list of masks(0 - background,
1 - phenomenon).  If a particular phenomenon requires more complicated transformations of the native satellite images,
then all that needs to be done is to create a class that generates the phenomenon masks from the original images and pass
these masks to <code>TimeOrderedSequence</code>, either by class inheritance or by explicit instantiation.</p>
<p>For example, let&#x27;s quickly create a class which defines a phenomenon with two threshols instead of just one</p>
<div class="language-python codeBlockContainer_Ch_4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uXKs"><pre tabindex="0" class="prism-code language-python codeBlock_IQLA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_tke2"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">DoubleThresholdEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TimeOrderedSequence</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            images</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            timestamps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            grid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GeoGrid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            threshold1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            threshold2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">float</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        masks </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">threshold1 </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> threshold2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> image </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> images</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">masks</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timestamps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grid</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Vx5J"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVTc" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_wXx_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_v7Wq"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This also facilitates more complicated definitions of masks such as those based on the anomaly or comparisons with
higher-order moments calculated from the native images.</p>
<h3 class="anchor anchorWithStickyNavbar_au_B" id="fortracc-objects-objectspy">ForTraCC Objects: <code>objects.py</code><a href="#fortracc-objects-objectspy" class="hash-link" aria-label="Direct link to fortracc-objects-objectspy" title="Direct link to fortracc-objects-objectspy">​</a></h3>
<p><code>objects.py</code> contains two useful classes for ForTraCC.  The first, <code>GeoGrid</code>, is(for now) a glorified dictionary
that houses all the geographical information of an image.</p>
<div class="language-python codeBlockContainer_Ch_4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uXKs"><pre tabindex="0" class="prism-code language-python codeBlock_IQLA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_tke2"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">GeoGrid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Object used to store geographical lat/lon coordinates.  For now it&#x27;s a glorified dictionary.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            latitude</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            longitude</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        :param List latitude: The latitude for each pixel on a grid given as a vector.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        :param List longitude: The longitude for each pixel on a grid given as a vector.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><br></span></code></pre><div class="buttonGroup_Vx5J"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVTc" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_wXx_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_v7Wq"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The second class, <code>Scene</code>, is useful for representing the connected components of a single image.</p>
<div class="language-python codeBlockContainer_Ch_4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uXKs"><pre tabindex="0" class="prism-code language-python codeBlock_IQLA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_tke2"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Scene</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Object used for describing a phenomenon defined by a mask.  Stores individual &quot;events&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    as connected components of the provided mask and filters out events below a certain size</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    (total number of pixels in connected component).</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mask</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> np</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            timestamp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            connectivity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            min_size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        :param np.array mask: True/False mask describing a phenomenon.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        :param str timestamp: A string formatted as YYYYMMDDhhmm(e.g. 201501011430) giving the datetime of the</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                              provided mask.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        :param int connectivity: Determines how nearest neighbors are chosen when building connected components.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                                 Choosing 1 selects top/bottom, left/right neighbors whereas 2 includes</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">                                 the diagonals as well.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        :param int min_size: Smallest size connected component(total number of pixels) to include as an &quot;event&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        &quot;&quot;&quot;</span><br></span></code></pre><div class="buttonGroup_Vx5J"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVTc" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_wXx_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_v7Wq"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let&#x27;s focus on <code>Scene</code> since <code>GeoGrid</code> is extremely simple.  <code>Scene</code> uses <code>skimage.measure</code> to delineate the connected
compenents of the provided mask.  Once the connected components are defined, they are passed to
<code>skimage.measure.regionprops</code> which calculates a myriad of properties for each of the connected components(for a full
list of the properties, see <a href="https://scikit-image.org/docs/stable/api/skimage.measure.html#skimage.measure.regionprops" target="_blank" rel="noopener noreferrer">https://scikit-image.org/docs/stable/api/skimage.measure.html#skimage.measure.regionprops</a>).<br>
<!-- -->These properties may come in handy later down the line, but for now, the only useful one is <code>area</code> which gives the total
pixel count of the connected component.</p>
<h2 class="anchor anchorWithStickyNavbar_au_B" id="netcdf-format">NetCDF Format<a href="#netcdf-format" class="hash-link" aria-label="Direct link to NetCDF Format" title="Direct link to NetCDF Format">​</a></h2>
<p>The netCDF read/write utils are located in fortracc-module/utils.py.  The file structure is as follows:</p>
<div class="codeBlockContainer_Ch_4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uXKs"><pre tabindex="0" class="prism-code language-text codeBlock_IQLA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_tke2"><span class="token-line" style="color:#393A34"><span class="token plain">|- root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |- navigation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |- masks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         |- &lt;timestamp 1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         |- &lt;timestamp 2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         |-     ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         |- &lt;timestamp T&gt;</span><br></span></code></pre><div class="buttonGroup_Vx5J"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVTc" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_wXx_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_v7Wq"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The root of the file has the following format:</p>
<div class="language-python codeBlockContainer_Ch_4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uXKs"><pre tabindex="0" class="prism-code language-python codeBlock_IQLA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_tke2"><span class="token-line" style="color:#393A34"><span class="token plain">root group </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NETCDF4 data model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">file</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token plain"> HDF5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    event_type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> less_than_threshold</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    latitude_bounds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">19.99393463</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">4.96664858</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    longitude_bounds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">69.97372437</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">30.03031921</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start_date</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end_date</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120530</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dimensions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sizes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    variables</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dimensions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    groups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> navigation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> masks</span><br></span></code></pre><div class="buttonGroup_Vx5J"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVTc" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_wXx_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_v7Wq"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For the global information:</p>
<ul>
<li><code>event_type</code>:  This is the name of the event which is stored as a class variable for each of the event types(e.g. <code>LessThanEvent</code>)</li>
<li><code>latitude_bounds</code>:  The min/max latitudes covering the region.</li>
<li><code>longitude_bounds</code>:  The min/max longitudes covering the region.</li>
<li><code>start_date</code>:  The starting date for data collection given as YYYYMMDDhhmm.</li>
<li><code>end_date</code>:  The end date for data collection given as YYYYMMDDhhmm.</li>
</ul>
<p>From here, the data is separated into two groups: <code>navigation</code> and <code>masks</code>.  The first contains the lat/lon vectors that cover the region</p>
<div class="language-python codeBlockContainer_Ch_4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uXKs"><pre tabindex="0" class="prism-code language-python codeBlock_IQLA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_tke2"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;netCDF4._netCDF4.Group&#x27;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">group </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">navigation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dimensions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sizes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> lat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">687</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lon</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1099</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    variables</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dimensions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> float32 lat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lat</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> float32 lon</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lon</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    groups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup_Vx5J"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVTc" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_wXx_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_v7Wq"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>with variables <code>lat</code> and <code>lon</code>.  The second group contains the masks which are separated for each time step</p>
<div class="language-python codeBlockContainer_Ch_4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uXKs"><pre tabindex="0" class="prism-code language-python codeBlock_IQLA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_tke2"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;netCDF4._netCDF4.Group&#x27;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">group </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">masks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    num_events</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dimensions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sizes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    variables</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dimensions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    groups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120030</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120130</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120230</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120300</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120330</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120400</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120430</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120500</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201508120530</span><br></span></code></pre><div class="buttonGroup_Vx5J"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVTc" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_wXx_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_v7Wq"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here, the total number of events are given by the <code>num_events</code> attribute.  To access the masks themselves, we need to select a timestamp from the group which leads to</p>
<div class="language-python codeBlockContainer_Ch_4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_uXKs"><pre tabindex="0" class="prism-code language-python codeBlock_IQLA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_tke2"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;netCDF4._netCDF4.Group&#x27;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">group </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">masks</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">201508120000</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dimensions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sizes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> num_pixels</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">12898</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> num_cols</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    variables</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dimensions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> int32 mask_indices</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">num_pixels</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> num_cols</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    groups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup_Vx5J"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVTc" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_wXx_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_v7Wq"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The mask is finally acessed with the <code>mask_indices</code> variable which is an N x 3 array where each row gives the (<code>row_index</code>, <code>col_index</code>, <code>event_id</code>) for each phenomenon.  The total size of the mask can be determined from the sizes of <code>lat</code> and <code>lon</code>.  Then these indices can be used to reconstruct the full mask.  See <code>read_nc4</code> in <code>fortracc-module/utils.py</code> for details.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/tos2ca-documentation/docs/anomaly-detection"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Anomaly Detection</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tos2ca-documentation/docs/data-dictionaries"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data Dictionaries</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_E9Ol thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#quickstart-simple-thresholding-case" class="table-of-contents__link toc-highlight">Quickstart: Simple Thresholding Case</a></li><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#fortracc-implementation-flowpy" class="table-of-contents__link toc-highlight">ForTraCC Implementation: <code>flow.py</code></a></li><li><a href="#fortracc-objects-objectspy" class="table-of-contents__link toc-highlight">ForTraCC Objects: <code>objects.py</code></a></li></ul></li><li><a href="#netcdf-format" class="table-of-contents__link toc-highlight">NetCDF Format</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/tos2ca-documentation/docs/intro">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/tos2ca-documentation/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/tos2ca-documentation/code_of_conduct">Code of Conduct</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/tos2ca-documentation/contributing">Contributing</a></li><li class="footer__item"><a class="footer__link-item" href="/tos2ca-documentation/governance">Governance</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/search?q=org%3Anasa-jpl+tos2ca&amp;type=repositories" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_gR1H"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2023 California Institute of Technology ("Caltech"). U.S. Government sponsorship acknowledged. Contents licensed under Apache License Version 2.0.</div></div></div></footer></div>
</body>
</html>